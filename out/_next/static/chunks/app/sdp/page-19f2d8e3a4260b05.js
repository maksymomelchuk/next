(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{6604:function(e,r,n){Promise.resolve().then(n.bind(n,5001))},5001:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return R}});var s=n(5607),a=n(8570),i=n(2943),l=n(5125),t=n(6028);let d=t.z.object({id:t.z.number(),first_name:t.z.string().optional(),last_name:t.z.string().optional(),email:t.z.string().optional()}),o=t.z.object({id:t.z.number(),data_provider_string:t.z.string(),provider_id:t.z.string()}),c=t.z.object({cycle_counter:t.z.union([t.z.number(),t.z.null()]),file_format:t.z.union([t.z.string(),t.z.null()]),file_pattern:t.z.union([t.z.string(),t.z.null()]),private_switch:t.z.union([t.z.number(),t.z.null()]),require_header:t.z.union([t.z.number(),t.z.null()]),require_trailer:t.z.union([t.z.number(),t.z.null()])}),u=t.z.object({id:t.z.number(),name:t.z.string(),alias:t.z.string(),enabled:t.z.number(),created_at:t.z.string(),adr_providers:t.z.array(o),options:c,updated_at:t.z.union([t.z.string(),t.z.null()]),users:t.z.array(d).optional(),total_files:t.z.number(),total_records:t.z.number()});t.z.array(u);let m=async()=>{let{data:e}=await l.ZP.get("/sdp?order_by=id&order_type=asc"),r=e.map(e=>u.parse(e));return r},p=async e=>{let{id:r,data:n}=e;delete n.adr_providers;let s=await l.ZP.put("/sdp/".concat(r),n);return console.log("Data after updating sdp",s),s};var f=n(4889),h=n(9402),x=n(1189),b=n(8251),g=n(6048),v=n(3782),j=n(4989),z=n(4614),N=n(5175),_=n(9234),y=n(9958);let w=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,s.jsx)(_.fC,{className:(0,y.cn)("focus-visible:ring-ring focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input peer inline-flex h-[20px] w-[36px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),...a,ref:r,children:(0,s.jsx)(_.bU,{className:(0,y.cn)("bg-background pointer-events-none block h-4 w-4 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})});w.displayName=_.fC.displayName;var k=n(4279),Z=n(9260);let C=t.Ry({name:t.Z_().min(1).max(255),alias:t.Z_().min(1).max(63),enabled:t.O7(),adr_providers:t.IX(t.Ry({id:t.Rx(),data_provider_string:t.Z_(),provider_id:t.Z_(),checked:t.O7()}))}),S=e=>{let{data:r}=e,n=r.adr_providers.map(e=>({...e,checked:!0})),{canUpdate:a}=(0,Z.x)("/sdp"),{mutateAsync:i}=(0,k.F)(p,["/sdp"]),l=(0,g.cI)({resolver:(0,b.F)(C),defaultValues:{name:r.name,alias:r.alias,enabled:!!r.enabled,adr_providers:n}});return console.log("here validation errors -->",l.formState.errors),(0,s.jsx)(z.l0,{...l,children:(0,s.jsxs)("form",{onSubmit:l.handleSubmit(e=>{let n={...e,enabled:Number(e.enabled),nena_ids:e.adr_providers.filter(e=>e.checked).map(e=>e.id)};i({id:r.id,data:n})}),className:"",children:[(0,s.jsx)(z.Wi,{control:l.control,name:"name",render:e=>{let{field:r}=e;return(0,s.jsxs)(z.xJ,{children:[(0,s.jsx)(z.lX,{children:"Name"}),(0,s.jsx)(z.NI,{children:(0,s.jsx)(N.I,{autoComplete:"off",placeholder:"Name",className:"lg:max-w-[80%]",disabled:!a,...r})}),(0,s.jsx)(z.pf,{children:"This is your official recognizable company name"}),(0,s.jsx)(z.zG,{})]})}}),(0,s.jsx)(z.Wi,{control:l.control,name:"alias",render:e=>{let{field:r}=e;return(0,s.jsxs)(z.xJ,{className:"mt-8",children:[(0,s.jsx)(z.lX,{children:"Alias"}),(0,s.jsx)(z.NI,{children:(0,s.jsx)(N.I,{autoComplete:"off",placeholder:"Alias",className:"lg:max-w-[80%]",disabled:!a,...r})}),(0,s.jsx)(z.pf,{children:"Alias refers to a shortcut application use such as SFTP folder."}),(0,s.jsx)(z.zG,{})]})}}),n.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"mb-5 mt-8 text-sm font-medium leading-none",children:"NENA Provider IDs"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-8 lg:max-w-[60%]",children:n.map((e,r)=>(0,s.jsx)(z.Wi,{defaultValue:e,control:l.control,name:"adr_providers.".concat(r),render:r=>{let{field:n}=r;return(0,s.jsxs)(z.xJ,{className:"mt-2 flex flex-row items-center space-x-3 space-y-0",children:[(0,s.jsx)(z.NI,{children:(0,s.jsx)(j.X,{disabled:!a,onCheckedChange:e=>n.onChange({...n.value,checked:!!e}),checked:n.value.checked})}),(0,s.jsx)(z.lX,{className:"flex w-full  gap-3 text-sm font-normal",children:(0,s.jsx)("p",{children:e.provider_id})})]},e.id)}},e.id))})]}),(0,s.jsx)(z.Wi,{control:l.control,name:"enabled",render:e=>{let{field:r}=e;return(0,s.jsxs)(z.xJ,{children:[(0,s.jsxs)("div",{className:"mt-12 flex items-center gap-2",children:[(0,s.jsx)(w,{id:"enabled",defaultChecked:r.value,onCheckedChange:r.onChange,disabled:!a}),(0,s.jsx)(z.lX,{className:"m-0 space-y-0",children:"Enabled"})]}),(0,s.jsx)(z.zG,{})]})}}),(0,s.jsx)(v.z,{type:"submit",className:"mt-24",disabled:!a,children:"Save changes"})]})})};var R=()=>{let e=(0,f.b)("Sdp@ListSdps"),{data:r}=(0,i.a)({queryKey:["/sdp"],queryFn:m,enabled:e});return(0,s.jsx)("section",{className:"container grid items-center gap-6 pb-8 pt-6 md:py-10",children:(0,s.jsx)("div",{className:"overflow-hidden rounded-[0.5rem] border bg-background shadow-xl",children:(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"SDP"}),(0,s.jsx)("p",{className:"mt-3 text-ring dark:text-foreground/80",children:"Manage your subscriber data providers"}),(0,s.jsx)(h.Z,{className:"my-5"}),(0,s.jsxs)(x.mQ,{defaultValue:"0",className:"flex flex-col md:flex-row",orientation:"vertical",children:[(0,s.jsx)(x.dr,{className:"grid h-full min-w-[300px] grid-cols-1 gap-3 bg-inherit",children:null==r?void 0:r.map((e,r)=>(0,s.jsx)(x.SP,{value:String(r),className:"justify-start text-base text-foreground data-[state=active]:bg-muted",children:e.name},e.id))}),(0,s.jsx)(h.Z,{className:"my-5 md:hidden"}),null==r?void 0:r.map((e,r)=>(0,s.jsx)(x.nU,{value:String(r),className:"grow",children:(0,s.jsx)("div",{className:"px-5",children:(0,s.jsx)(S,{data:e})})},e.id))]})]})})})}},3153:function(e,r,n){"use strict";n.d(r,{P:function(){return N}});var s=n(7582),a=n(2008),i=n(3046),l=n(9950),t=n(8636),d=n(8427),o=n(6945),c=n(1536),u=n(3698),m=n(2503),p=n(6526),f=n(7396),h=n(4761),x=n(221),b=n(7066),g=n(3632),v=n(942),j=n(8110),z=n(1468);let N={sun:s.Z,moon:a.Z,twitter:i.Z,burgerMenu:l.Z,closeMenu:t.Z,check:d.Z,edit:o.Z,sort:c.Z,asc:u.Z,desc:m.Z,hide:p.Z,dotsHorizontal:f.Z,trash:h.Z,options:x.Z,plus:b.Z,search:g.Z,arrowDown:v.Z,plusCircle:j.Z,minusCircle:z.Z}},4989:function(e,r,n){"use strict";n.d(r,{X:function(){return d}});var s=n(5607),a=n(8570),i=n(7663),l=n(9958),t=n(3153);let d=a.forwardRef((e,r)=>{let{className:n,...a}=e;return(0,s.jsx)(i.fC,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...a,children:(0,s.jsx)(i.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(t.P.check,{className:"h-4 w-4"})})})});d.displayName=i.fC.displayName},9402:function(e,r,n){"use strict";n.d(r,{Z:function(){return t}});var s=n(5607),a=n(8570),i=n(2448),l=n(9958);let t=a.forwardRef((e,r)=>{let{className:n,orientation:a="horizontal",decorative:t=!0,...d}=e;return(0,s.jsx)(i.f,{ref:r,decorative:t,orientation:a,className:(0,l.cn)("bg-border shrink-0","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",n),...d})});t.displayName=i.f.displayName},9260:function(e,r,n){"use strict";n.d(r,{x:function(){return i}});var s=n(8570),a=n(7275);let i=e=>{let r,n,i,l;let{permissions:t}=(0,s.useContext)(a.Vo);return"/ldb"===e?(r=null==t?void 0:t.includes("Ldb@CreateRecord"),n=null==t?void 0:t.includes("Ldb@UpdateRecord"),i=null==t?void 0:t.includes("Ldb@DeleteRecord")):"/sdp"===e?(r=null==t?void 0:t.includes("Sdp@CreateSdp"),n=null==t?void 0:t.includes("Sdp@UpdateSdp")):"/msag/imports"===e||"/msag/records"===e?(n=null==t?void 0:t.includes("Msag@UpdateRecord"),i=null==t?void 0:t.includes("Msag@DeleteRecord"),r=null==t?void 0:t.includes("Msag@CreateRecord"),l=null==t?void 0:t.includes("Msag@UploadFile")):("/soi/imports"===e||"/soi/records"===e)&&(n=null==t?void 0:t.includes("Soi@UpdateRecord"),i=null==t?void 0:t.includes("Soi@DeleteRecord"),r=null==t?void 0:t.includes("Soi@CreateRecord"),l=null==t?void 0:t.includes("Soi@UploadFile")),{canCreate:r,canUpdate:n,canDelete:i,canUploadFile:l}}},4889:function(e,r,n){"use strict";n.d(r,{b:function(){return t}});var s=n(8570),a=n(9520),i=n(7275),l=n(5697);let t=e=>{let[r,n]=(0,s.useState)(!1),{permissions:t}=(0,s.useContext)(i.Vo);return(0,s.useEffect)(()=>{t&&(t.includes(e)?n(!0):((0,l.Am)({variant:"error",description:"You do not have permission to access this page."}),(0,a.redirect)("/")))},[t,e]),r}},4279:function(e,r,n){"use strict";n.d(r,{F:function(){return l}});var s=n(6884),a=n(4508),i=n(5697);let l=(e,r)=>{let n=(0,s.NL)();return(0,a.D)({mutationFn:e,onSuccess:(e,s)=>{let{id:a}=s;n.invalidateQueries({queryKey:r,refetchPage(e){let r=e.find(e=>e.id===a);return!!r}}),(0,i.Am)({variant:"success",description:"Successfully changed"})}})}}},function(e){e.O(0,[468,28,246,492,934,31,501,524,744],function(){return e(e.s=6604)}),_N_E=e.O()}]);