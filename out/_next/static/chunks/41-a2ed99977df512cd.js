"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[41],{7275:function(e,t,r){let o;r.d(t,{Vo:function(){return d},tP:function(){return o}});var n=r(5607),a=r(8570),s=r(2943),i=r(8821),l=r(1821);let c={onLoad:"login-required",pkceMethod:"S256"};o=new i.Z({realm:"LDB-DEV",clientId:"ldb-front",url:"https://2933-91-214-85-180.ngrok-free.app"});let d=(0,a.createContext)({isAuthenticated:!1,logout:()=>{},firstName:"",token:"",profile:null,permissions:null,roles:null,userType:""});t.ZP=e=>{console.log("rendering AuthContextProvider");let[t,r]=(0,a.useState)(!1),[i,u]=(0,a.useState)(""),[f,p]=(0,a.useState)(null),[m,g]=(0,a.useState)(""),[h,y]=(0,a.useState)(null),[v,x]=(0,a.useState)(null),[b,w]=(0,a.useState)("");return(0,s.a)({queryKey:["profile"],queryFn:l.YI,enabled:t,onSuccess:e=>{p(e),g(e.first_name),y(e.permissions),x(e.roles),w(e.type.toLowerCase())}}),(0,a.useEffect)(()=>{(async function(){console.log("initialize Keycloak");try{let e=await o.init(c);console.log("isAuthenticatedResponse:",e),e||(console.log("user is not yet authenticated. forwarding user to login."),o.login());let t=o.token,n=o.refreshToken;t&&n&&(u(t),localStorage.setItem("token",t),localStorage.setItem("refreshToken",n)),console.log("user already authenticated"),r(e)}catch(e){console.log("error initializing Keycloak"),r(!1)}})().then(()=>console.log("initialized Keycloak")).catch(()=>console.log("error initializing Keycloak"))},[]),(0,n.jsx)(d.Provider,{value:{isAuthenticated:t,logout:()=>{o.logout(),localStorage.removeItem("token"),localStorage.removeItem("refreshToken")},firstName:m,token:i,profile:f,permissions:h,roles:v,userType:b},children:t?e.children:null})}},1821:function(e,t,r){r.d(t,{N4:function(){return s},O8:function(){return a},YI:function(){return n}});var o=r(5125);let n=async()=>{let{data:e}=await o.ZP.get("/account");return e},a=async e=>{let{data:t}=await o.ZP.put("/account/update",e);return t},s=async e=>{let{data:t}=await o.ZP.put("/account/update-password",e);return t}},5125:function(e,t,r){r.d(t,{ZP:function(){return i}});var o=r(5083),n=r(7275),a=e=>{let t=new URLSearchParams({client_id:"ldb-front",grant_type:"refresh_token",refresh_token:e}),r=o.Z.post("".concat("https://2933-91-214-85-180.ngrok-free.app","/realms/").concat("LDB-DEV","/protocol/openid-connect/token"),t.toString(),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return r};let s=o.Z.create({baseURL:"https://2f03-91-214-85-180.ngrok-free.app/api/v1",headers:{}});s.interceptors.request.use(e=>(e.headers&&e.headers.set("Authorization","Bearer ".concat(localStorage.getItem("token"))),e)),s.interceptors.response.use(function(e){return e},async function(e){let t=e.config;if(console.log("Some error in request",e),419===e.response.status&&!t._retry){console.log("Trying to refresh token",e),t._retry=!0;let i=localStorage.getItem("refreshToken");if(!i){console.log("NO TOKEN IN LOCAL STORAGE --> FORCE LOGOUT"),n.tP.logout();return}try{let e=await a(i),r=e.data.access_token,o=e.data.refresh_token;return localStorage.setItem("token",r),localStorage.setItem("refreshToken",o),t.headers.Authorization="Bearer ".concat(r),s(t)}catch(e){if(o.Z.isAxiosError(e)){var r;console.log("file: axiosInstance.ts:59 ~ error:",e),(null===(r=e.response)||void 0===r?void 0:r.status)===400&&"invalid_grant"===e.response.data.error&&(console.log("NO TOKEN --> FORCE LOGOUT"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),n.tP.logout())}}}return Promise.reject(e)});var i={get:(e,t)=>s.get(e,t),delete:(e,t)=>s.delete(e,t),post:(e,t,r)=>s.post(e,t,r),patch:(e,t,r)=>s.patch(e,t,r),put:(e,t,r)=>s.put(e,t,r)}},3153:function(e,t,r){r.d(t,{P:function(){return S}});var o=r(7582),n=r(2008),a=r(3046),s=r(9950),i=r(8636),l=r(8427),c=r(6945),d=r(1536),u=r(3698),f=r(2503),p=r(6526),m=r(7396),g=r(4761),h=r(221),y=r(7066),v=r(3632),x=r(942),b=r(8110),w=r(1468);let S={sun:o.Z,moon:n.Z,twitter:a.Z,burgerMenu:s.Z,closeMenu:i.Z,check:l.Z,edit:c.Z,sort:d.Z,asc:u.Z,desc:f.Z,hide:p.Z,dotsHorizontal:m.Z,trash:g.Z,options:h.Z,plus:y.Z,search:v.Z,arrowDown:x.Z,plusCircle:b.Z,minusCircle:w.Z}},3782:function(e,t,r){r.d(t,{d:function(){return l},z:function(){return c}});var o=r(5607),n=r(8570),a=r(302),s=r(1835),i=r(9958);let l=(0,s.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input hover:bg-muted hover:text-accent-foreground",outlineNav:"border border-white hover:scale-105 hover:bg-accent",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-secondary hover:text-secondary-foreground",ghostThemeToggle:"hover:bg-accent hover:text-background dark:hover:bg-background dark:hover:text-foreground",link:"underline-offset-4 hover:underline text-primary"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:s,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,o.jsx)(u,{className:(0,i.cn)(l({variant:n,size:s,className:r})),ref:t,...d})});c.displayName="Button"},7785:function(e,t,r){r.d(t,{$F:function(){return u},AW:function(){return m},Ju:function(){return v},VD:function(){return x},Xi:function(){return g},bO:function(){return h},h_:function(){return d}});var o=r(5607),n=r(8570),a=r(262),s=r(6432),i=r(8427),l=r(5527),c=r(9958);let d=a.fC,u=a.xz;a.ZA,a.Uv,a.Tr,a.Ee;let f=n.forwardRef((e,t)=>{let{className:r,inset:n,children:i,...l}=e;return(0,o.jsxs)(a.fF,{ref:t,className:(0,c.cn)("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",n&&"pl-8",r),...l,children:[i,(0,o.jsx)(s.Z,{className:"ml-auto h-4 w-4"})]})});f.displayName=a.fF.displayName;let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.tu,{ref:t,className:(0,c.cn)("bg-popover text-popover-foreground animate-in data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",r),...n})});p.displayName=a.tu.displayName;let m=n.forwardRef((e,t)=>{let{className:r,sideOffset:n=4,...s}=e;return(0,o.jsx)(a.Uv,{children:(0,o.jsx)(a.VY,{ref:t,sideOffset:n,className:(0,c.cn)("bg-popover text-popover-foreground animate-in data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",r),...s})})});m.displayName=a.VY.displayName;let g=n.forwardRef((e,t)=>{let{className:r,inset:n,...s}=e;return(0,o.jsx)(a.ck,{ref:t,className:(0,c.cn)("focus:bg-secondary focus:text-secondary-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",r),...s})});g.displayName=a.ck.displayName;let h=n.forwardRef((e,t)=>{let{className:r,children:n,checked:s,...l}=e;return(0,o.jsxs)(a.oC,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:s,...l,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(a.wU,{children:(0,o.jsx)(i.Z,{className:"h-4 w-4"})})}),n]})});h.displayName=a.oC.displayName;let y=n.forwardRef((e,t)=>{let{className:r,children:n,...s}=e;return(0,o.jsxs)(a.Rk,{ref:t,className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...s,children:[(0,o.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,o.jsx)(a.wU,{children:(0,o.jsx)(l.Z,{className:"h-2 w-2 fill-current"})})}),n]})});y.displayName=a.Rk.displayName;let v=n.forwardRef((e,t)=>{let{className:r,inset:n,...s}=e;return(0,o.jsx)(a.__,{ref:t,className:(0,c.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",r),...s})});v.displayName=a.__.displayName;let x=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)(a.Z0,{ref:t,className:(0,c.cn)("bg-muted -mx-1 my-1 h-px",r),...n})});x.displayName=a.Z0.displayName},5697:function(e,t,r){r.d(t,{Am:function(){return u},pm:function(){return f}});var o=r(8570);let n=0,a=new Map,s=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),d({type:"REMOVE_TOAST",toastId:e})},5e3);a.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?s(r):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_VALUE).toString(),o=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||o()}}}),{id:r,dismiss:o,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=o.useState(c);return o.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9958:function(e,t,r){r.d(t,{cn:function(){return a}});var o=r(9754),n=r(4663);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m)((0,o.W)(t))}}}]);